{"componentChunkName":"component---src-templates-post-template-post-template-tsx","path":"/posts/aws-lambda","result":{"data":{"markdownRemark":{"id":"0d64bca7-a4dc-5a5b-9f82-f9a3f574d059","html":"<h2 id=\"문제-상황\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C-%EC%83%81%ED%99%A9\" aria-label=\"문제 상황 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제 상황</h2>\n<p>사이드프로젝트 용으로 AWS RDS <code class=\"language-text\">db.t3.micro</code>를 사용하고 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/372b94c0547272399267399b532d54fb/62b00/0-db.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.083333333333332%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAgklEQVQI1zWNSQ7CUAxDe3vOwxV6CnaUJeVPSX6coRtUBsvSkxdPXkqp9+1BLAq4R2T+GnnkQeq1EzObmWcatBLmtu7rhW/XRYHa+v4qxAwzmE1VVXiEnET881kAzDzM0z0WdxfFs8tUZWaZk5n7GETnYalVRAaRu39FM1OgtTbGeAPHG6pwCNxWDwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/372b94c0547272399267399b532d54fb/8ac56/0-db.webp 240w,\n/static/372b94c0547272399267399b532d54fb/d3be9/0-db.webp 480w,\n/static/372b94c0547272399267399b532d54fb/e46b2/0-db.webp 960w,\n/static/372b94c0547272399267399b532d54fb/f992d/0-db.webp 1440w,\n/static/372b94c0547272399267399b532d54fb/882b9/0-db.webp 1920w,\n/static/372b94c0547272399267399b532d54fb/1f0ff/0-db.webp 2708w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/372b94c0547272399267399b532d54fb/8ff5a/0-db.png 240w,\n/static/372b94c0547272399267399b532d54fb/e85cb/0-db.png 480w,\n/static/372b94c0547272399267399b532d54fb/d9199/0-db.png 960w,\n/static/372b94c0547272399267399b532d54fb/07a9c/0-db.png 1440w,\n/static/372b94c0547272399267399b532d54fb/29114/0-db.png 1920w,\n/static/372b94c0547272399267399b532d54fb/62b00/0-db.png 2708w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/372b94c0547272399267399b532d54fb/d9199/0-db.png\"\n            alt=\"데이터 베이스\"\n            title=\"데이터 베이스\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>사프용으로 사용해보니, 다음과 같은 단점들이 있었다.</p>\n<ol>\n<li><strong>불필요한 비용이 많이 든다.</strong>\n<ul>\n<li>30d * 24 hr 으로 책정되어 불필요한 과금</li>\n<li>평소에 작업할 때 말고는 사용하지 않기 때문에 사용하지 않을 때는 일시정지 처리가 필요하다.</li>\n</ul>\n</li>\n<li>직접 일시정지 상태로 처리하면 DB는 일주일만 일시정지가 유지된다.\n<ul>\n<li>완전히 삭제하는게 아닌 이상, 일주일이 지나면 다시 활성화 돼서 비용이 부과된다.</li>\n<li>그리고 켜서 작업하다가 끄는 걸 깜빡한다면? 계속 비용이 부과된다.</li>\n</ul>\n</li>\n<li>개발자는 나뿐이라, 같이 작업하는 친구들이 DB를 활성화해야한다면 나를 통해 요청해야한다.\n<ul>\n<li>어 좀 귀찮은데..? 웹페이지에서 처리 못하나?</li>\n</ul>\n</li>\n</ol>\n<br />\n<br />\n<h2 id=\"해결책\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EA%B2%B0%EC%B1%85\" aria-label=\"해결책 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>해결책</h2>\n<ol>\n<li>불필요한 비용이 많이 든다. → 사용할 때만 DB를 활성화 시킨다.</li>\n<li>일시정지 상태는 일주일만 유지된다. → 매 시간마다 스케쥴러를 돌려서 “일시정지” 상태를 유지시킨다.</li>\n<li>매번 킬 때마다 AWS에 접속해야한다. → REST API를 활용하여 웹페이지 내에서 관리한다.</li>\n</ol>\n<p><strong>→ 이 모든게 가능한 AWS Lambda 를 활용한다.</strong></p>\n<blockquote>\n<p><a href=\"https://aws.amazon.com/ko/lambda/features/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">AWS 람다(AWS Lambda)</a>는 <a href=\"https://www.44bits.io/ko/keyword/amazon-web-service\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">아마존 웹 서비스</a>에서 제공하는 서비리스 컴퓨팅 서비스이다. 서버리스 컴퓨팅은 애플리케이션을 실행하기 위한 별도의 서버 셋업 없이 곧바로 코드를 실행시켜주는 서비스 자체를 의미하며, 고정 비용없이 사용 시간에 대해서만 비용이 발생한다.</p>\n</blockquote>\n<br />\n<br />\n<h2 id=\"순서\" style=\"position:relative;\"><a href=\"#%EC%88%9C%EC%84%9C\" aria-label=\"순서 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>순서</h2>\n<ol>\n<li>AWS Lambda 생성</li>\n<li>API Gateway 추가</li>\n<li>웹 어플리케이션에 API 적용</li>\n<li>Event Scheduler 활용</li>\n</ol>\n<br />\n<br />\n<h2 id=\"1-aws-lambda-생성\" style=\"position:relative;\"><a href=\"#1-aws-lambda-%EC%83%9D%EC%84%B1\" aria-label=\"1 aws lambda 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. AWS Lambda 생성</h2>\n<p>람다로 만들어야하는 함수는 총 두 가지이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dfe8ae15b49c3616b4d1b3e480391cad/dd507/1-fuction.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAhklEQVQI12XOOw7DMAgGYN//IL1P1b1blrR1bMBgHlIq20NU9ROI4ReIlEtpPLQ/9FtIBIiAWBGRCLd7en8yANYKItKnOUfrxcyMmWGixl24PG6pAjbmPnJf1pGIEOlI1Lsys7vHRNRWGueZtqM9X6Tm4Rczm8uy3tn3XVXXfs6HiESEm34Bbknmc3reT0AAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/dfe8ae15b49c3616b4d1b3e480391cad/8ac56/1-fuction.webp 240w,\n/static/dfe8ae15b49c3616b4d1b3e480391cad/d3be9/1-fuction.webp 480w,\n/static/dfe8ae15b49c3616b4d1b3e480391cad/e46b2/1-fuction.webp 960w,\n/static/dfe8ae15b49c3616b4d1b3e480391cad/f992d/1-fuction.webp 1440w,\n/static/dfe8ae15b49c3616b4d1b3e480391cad/2be02/1-fuction.webp 1528w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/dfe8ae15b49c3616b4d1b3e480391cad/8ff5a/1-fuction.png 240w,\n/static/dfe8ae15b49c3616b4d1b3e480391cad/e85cb/1-fuction.png 480w,\n/static/dfe8ae15b49c3616b4d1b3e480391cad/d9199/1-fuction.png 960w,\n/static/dfe8ae15b49c3616b4d1b3e480391cad/07a9c/1-fuction.png 1440w,\n/static/dfe8ae15b49c3616b4d1b3e480391cad/dd507/1-fuction.png 1528w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/dfe8ae15b49c3616b4d1b3e480391cad/d9199/1-fuction.png\"\n            alt=\"1 fuction\"\n            title=\"1 fuction\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<ul>\n<li>db-status: DB 인스턴스의 상태를 조회하는 함수</li>\n<li>db-manage: DB 인스턴스의 상태를 변경하는 함수</li>\n</ul>\n<h3 id=\"1-1-db-status\" style=\"position:relative;\"><a href=\"#1-1-db-status\" aria-label=\"1 1 db status permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1-1. DB Status</h3>\n<p>handler 함수 안에 event 값을 받아오고,<code class=\"language-text\">aws-sdk</code> 라이브러리를 이용하여 원하는 db의 상태를 조회한다.</p>\n<p><img src=\"media/1-/db-status.png\" alt=\"\"></p>\n<h4 id=\"참고-람다에-외부-라이브러리를-추가하려면\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0-%EB%9E%8C%EB%8B%A4%EC%97%90-%EC%99%B8%EB%B6%80-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC%EB%A5%BC-%EC%B6%94%EA%B0%80%ED%95%98%EB%A0%A4%EB%A9%B4\" aria-label=\"참고 람다에 외부 라이브러리를 추가하려면 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[참고] 람다에 외부 라이브러리를 추가하려면</h4>\n<p>[계층]에서 추가하면 된다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f6f95e6e2adbed7bf4dbdba31e4e5721/dd507/1-db-library.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 10.416666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAVElEQVQI102LQQqAMAwE/f9bTZsmNbtJKwh6EeY0zByntHlFZvIHyABAgmRmAJ/MzKryOXXYMD90WIBmtmp97FrxrvomBEXavW9VPUVsWO9dWnP3B4dzcwyAPO4UAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/f6f95e6e2adbed7bf4dbdba31e4e5721/8ac56/1-db-library.webp 240w,\n/static/f6f95e6e2adbed7bf4dbdba31e4e5721/d3be9/1-db-library.webp 480w,\n/static/f6f95e6e2adbed7bf4dbdba31e4e5721/e46b2/1-db-library.webp 960w,\n/static/f6f95e6e2adbed7bf4dbdba31e4e5721/f992d/1-db-library.webp 1440w,\n/static/f6f95e6e2adbed7bf4dbdba31e4e5721/2be02/1-db-library.webp 1528w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/f6f95e6e2adbed7bf4dbdba31e4e5721/8ff5a/1-db-library.png 240w,\n/static/f6f95e6e2adbed7bf4dbdba31e4e5721/e85cb/1-db-library.png 480w,\n/static/f6f95e6e2adbed7bf4dbdba31e4e5721/d9199/1-db-library.png 960w,\n/static/f6f95e6e2adbed7bf4dbdba31e4e5721/07a9c/1-db-library.png 1440w,\n/static/f6f95e6e2adbed7bf4dbdba31e4e5721/dd507/1-db-library.png 1528w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/f6f95e6e2adbed7bf4dbdba31e4e5721/d9199/1-db-library.png\"\n            alt=\"1 db library\"\n            title=\"1 db library\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>다음과 같이 zip, s3 방식으로 추가 가능하다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dab28664e7ac54bd942e346c3560c791/0d0e4/1-db-library-detail.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.83333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAABEklEQVQoz5WRW27DIBRE2f+S2v63yQ6qKJGdKLF5xFzej4tNZfu3VcnRfCEOQjPk+3R6e//4Ohw/D0djrTamPUQCcCGEeFLGjLUvhVjnzudL1/VSQkFMMeaUGrPKlNL7MCilEDHlFyA+BOfcsiy11uVFSAiBcTFJUEqHEHPGlqTth6ustKGMD8PofEAsjTIiEuf9MNLpOY0jTSmXMrcESynzTFJKWinnQq0VEWNMMaZ/m97uJKJdGFUAkIxxa23dmBtYCzM+PCbd99eu62/XG+OcC1FKqQ2QGCPmLAG0Md5557z3fl+uSWZMnC/d/TEi4n66tbKz1vPXWyTECEoDaFAK1rENKC1BSYB9fAk65fyr/ANKxyuvp5zAlwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/dab28664e7ac54bd942e346c3560c791/8ac56/1-db-library-detail.webp 240w,\n/static/dab28664e7ac54bd942e346c3560c791/d3be9/1-db-library-detail.webp 480w,\n/static/dab28664e7ac54bd942e346c3560c791/e46b2/1-db-library-detail.webp 960w,\n/static/dab28664e7ac54bd942e346c3560c791/fc6cc/1-db-library-detail.webp 1230w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/dab28664e7ac54bd942e346c3560c791/8ff5a/1-db-library-detail.png 240w,\n/static/dab28664e7ac54bd942e346c3560c791/e85cb/1-db-library-detail.png 480w,\n/static/dab28664e7ac54bd942e346c3560c791/d9199/1-db-library-detail.png 960w,\n/static/dab28664e7ac54bd942e346c3560c791/0d0e4/1-db-library-detail.png 1230w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/dab28664e7ac54bd942e346c3560c791/d9199/1-db-library-detail.png\"\n            alt=\"1 db library detail\"\n            title=\"1 db library detail\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h3 id=\"1-2-db-manage\" style=\"position:relative;\"><a href=\"#1-2-db-manage\" aria-label=\"1 2 db manage permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1-2. DB Manage</h3>\n<p>DB의 상태를 변경한다.</p>\n<p><img src=\"media/1-/db-manage.png\" alt=\"\"></p>\n<blockquote>\n  <p class=\"warning\">\n    <strong>+ 참고 사항</strong>\n    <br />    \n    JSON 을 이용한 payload 처리와 REST API 를 이용한 params 처리는 서로 상이하여 구분된 처리를 진행하였다.\n  </p>\n</blockquote>\n<blockquote>\n  <p class=\"warning\">\n    <strong>+ 테스트 하는 방법</strong>\n    <br />    \n    람다를 만든 이후, <b>Test 템플릿</b>을 작성하여 아래와 같이 정상적으로 동작하는지 확인할 수 있다. 실제로 적용되니 주의가 필요하다.\n  </p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 574px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/73753c60a01eb548705da7a585a21c97/86389/image.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB70lEQVQoz3XSS8rUQBAA4NzHpV5APIQXEcSFuBFBcOPWA4gLF4P8/ILgCQZcOGYmk85rYibvdHfS6fQjj5bpZjS+vkWoQCpVXdUW51wyKvkgObsEOuacM8b41Tpes/KievUpe7LJnn44P7spHr2PX9wmaZZjjKqqqusaQtg0Dca4+13btlZ8zh6+He49P9x9/Pn+G3Ln5fnBa8+P4qapXQB834/jeP0XeIUxtsqqvv3Wb/bqxlk+usu7L3TzlbRdd+mVMUqpKUII6fueMTYMA6W07/uu6yzOhmWe52mEeZzHoEkjmH8PwzBN0yAIyrJUV8uyJElijqCUghBanHMhRznOCLdl3WRFiXBX13XbtgghSqlaEUIMmlLKdV0LQiilVEpJKYUQUsrL/PVTCGFGbRL0OZj5WCl1aRtCOI7jNE1hGO73e8dxfN8/Ho/b7dbzvEADAOx2u8PhYNt2lmUmGSFkCSGmaZrnmWqmCCHk56v6j2EYLADAOI6MMYyx2YEZiYkRQoQQzrkZmPErmWhlWQIAbNs+aWmaRlHkOE4QBJ7nVVVlkv+szDmfNACA4zhxHJvk0+nkum4URb7vI4T+nTyOo5RymqaiKJIkMa22bQshzPO80gghy3K5DWuMMStJEnN1pCY0s6f18oa/SCl/APg5DEGfe9YFAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/73753c60a01eb548705da7a585a21c97/8ac56/image.webp 240w,\n/static/73753c60a01eb548705da7a585a21c97/d3be9/image.webp 480w,\n/static/73753c60a01eb548705da7a585a21c97/4e18f/image.webp 574w\"\n              sizes=\"(max-width: 574px) 100vw, 574px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/73753c60a01eb548705da7a585a21c97/8ff5a/image.png 240w,\n/static/73753c60a01eb548705da7a585a21c97/e85cb/image.png 480w,\n/static/73753c60a01eb548705da7a585a21c97/86389/image.png 574w\"\n            sizes=\"(max-width: 574px) 100vw, 574px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/73753c60a01eb548705da7a585a21c97/86389/image.png\"\n            alt=\"image\"\n            title=\"image\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bd898ae95f3f642c87fafc10a8d85ab5/73b94/image-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABZ0lEQVQoz43R0Y6rIBAGYN//xappTnpR06ZRWkGwRGzLIAIK6qaS3ZOTk93sd0HCJD8zZBIhhHNOCNE0jVJqmiZr7TiOlFLGGKWUc+6cU0pdN1VVUUqtNb2VSdM0GOPb7VYUBefcGNP3PQCITbcBgNfr1W5iERQAyORwOGRZ9mcjhFDqXY7NI+ec3fxXcUlZlufzuaqqOBXbTNPkf+EdJoQopdZ1XZYlnt776dNP4a7rLpcLQogQIoTAGIcQvPfh009ha22e58fjkTHWti0A9H2vtR6GQSklpZzn+dvwuq6EkDRN8zzf7XbX6zXLsv1+n6bp6XQqy7Lruulff8POubZtMcaU0rquOed1XSOEiqIQQgAAIcR7P8/zsizzPIcQvp5IpJQIIa21lJJzjjEGgLhPzjlj7Pl8EkLu9ztjrK5rxtjj8QCAEEISv+ecG8dRax2XbK01xujNMAxa63gdhsEYM45j7PwBJ9lpcvOwZFkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/bd898ae95f3f642c87fafc10a8d85ab5/8ac56/image-1.webp 240w,\n/static/bd898ae95f3f642c87fafc10a8d85ab5/d3be9/image-1.webp 480w,\n/static/bd898ae95f3f642c87fafc10a8d85ab5/e46b2/image-1.webp 960w,\n/static/bd898ae95f3f642c87fafc10a8d85ab5/22cc9/image-1.webp 1004w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/bd898ae95f3f642c87fafc10a8d85ab5/8ff5a/image-1.png 240w,\n/static/bd898ae95f3f642c87fafc10a8d85ab5/e85cb/image-1.png 480w,\n/static/bd898ae95f3f642c87fafc10a8d85ab5/d9199/image-1.png 960w,\n/static/bd898ae95f3f642c87fafc10a8d85ab5/73b94/image-1.png 1004w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/bd898ae95f3f642c87fafc10a8d85ab5/d9199/image-1.png\"\n            alt=\"image 1\"\n            title=\"image 1\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/08fd2557f3e8b5ab5f3c3226ef9a5dc4/dd507/image-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAq0lEQVQY043PzXLCMAxGUb//G0IZMi0k4JD6R5Yl2bKTTlgXhjtnqW8hM47TeRi8C94HRNQX1VpFCnMhYoCkqtu2mZQwhAgAzvmUULX9q1ZlKZkIMz3PnmNVzTkzc+99XdfWWu+v7NVaSykioqomxng4fp1OZ++D1iZS3iASOy/D92WcLGI20236ud5vC94XuM6/swMX6Q0POxcpABtr7eOxQNqfiSkSU/m4P4oSWVFnLwvtAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/08fd2557f3e8b5ab5f3c3226ef9a5dc4/8ac56/image-2.webp 240w,\n/static/08fd2557f3e8b5ab5f3c3226ef9a5dc4/d3be9/image-2.webp 480w,\n/static/08fd2557f3e8b5ab5f3c3226ef9a5dc4/e46b2/image-2.webp 960w,\n/static/08fd2557f3e8b5ab5f3c3226ef9a5dc4/f992d/image-2.webp 1440w,\n/static/08fd2557f3e8b5ab5f3c3226ef9a5dc4/2be02/image-2.webp 1528w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/08fd2557f3e8b5ab5f3c3226ef9a5dc4/8ff5a/image-2.png 240w,\n/static/08fd2557f3e8b5ab5f3c3226ef9a5dc4/e85cb/image-2.png 480w,\n/static/08fd2557f3e8b5ab5f3c3226ef9a5dc4/d9199/image-2.png 960w,\n/static/08fd2557f3e8b5ab5f3c3226ef9a5dc4/07a9c/image-2.png 1440w,\n/static/08fd2557f3e8b5ab5f3c3226ef9a5dc4/dd507/image-2.png 1528w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/08fd2557f3e8b5ab5f3c3226ef9a5dc4/d9199/image-2.png\"\n            alt=\"image 2\"\n            title=\"image 2\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h3 id=\"1-3-정책--역할-부여\" style=\"position:relative;\"><a href=\"#1-3-%EC%A0%95%EC%B1%85--%EC%97%AD%ED%95%A0-%EB%B6%80%EC%97%AC\" aria-label=\"1 3 정책  역할 부여 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1-3. 정책 / 역할 부여</h3>\n<p>DB에 대한 접근 권한을 부여해야 정상적으로 동작하니, 정책이 없다면 IAM 정책 추가가 필요하다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f754650e6d215aaa2d19178f3fac0ac4/dd507/image-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74.58333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAABmUlEQVQoz42SDW+jMAyG8///3mna1nV3UAItISR2PpwvEBPQVb1Op+ujV5H1Klbs2EwobIW6CNldLrw7K62tc8baZ8S68+X17XD4OL6+vf96eTlWJ7AWNz1c/ekwNObUNLxtnXNE5IlCCHEj/E1Mjw6zzo3jiIgll3me52klxpRznr+ZpqmUEmO8d6ZpYp5IayilLHcYY4dBIiIAGmOWZSmlXPoeAKy1SinvaVkW5rwPIW7FruXuijGFGCmEXTf/5uwmG5TmYmwk1gNINQop64ZLNfKu412HxgDiv8QA8XdVnRpeN1yhobD+2ZNi3vvTif+pqqqupVpb0gDm+0HENdAaAADRrFtgXcl5F1NaK6Wsi2AILYDFcO06bUeK8RpscbzFKSU2rAhAX3dSSNAGKNBUpvQETEophJinQhSPvHtvjh/tZyvP3vv83+RByr7vcynkSejh81wd+LERLQWiQCmt27IT7gq+JothaNs2p4TG6rXkiM6AxQGkhDGlVDZyyY7cY7LWuu975z2ti7IOYGff3vvB0I9RfQF4EleUayTJ6gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/f754650e6d215aaa2d19178f3fac0ac4/8ac56/image-3.webp 240w,\n/static/f754650e6d215aaa2d19178f3fac0ac4/d3be9/image-3.webp 480w,\n/static/f754650e6d215aaa2d19178f3fac0ac4/e46b2/image-3.webp 960w,\n/static/f754650e6d215aaa2d19178f3fac0ac4/f992d/image-3.webp 1440w,\n/static/f754650e6d215aaa2d19178f3fac0ac4/2be02/image-3.webp 1528w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/f754650e6d215aaa2d19178f3fac0ac4/8ff5a/image-3.png 240w,\n/static/f754650e6d215aaa2d19178f3fac0ac4/e85cb/image-3.png 480w,\n/static/f754650e6d215aaa2d19178f3fac0ac4/d9199/image-3.png 960w,\n/static/f754650e6d215aaa2d19178f3fac0ac4/07a9c/image-3.png 1440w,\n/static/f754650e6d215aaa2d19178f3fac0ac4/dd507/image-3.png 1528w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/f754650e6d215aaa2d19178f3fac0ac4/d9199/image-3.png\"\n            alt=\"image 3\"\n            title=\"image 3\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>정책을 추가했다면, 각각 람다에 해당 역할들을 부여해야한다.\n즉, <code class=\"language-text\">control-db-instance</code> 정책을 람다는 사용할 수 있어요~ 같은거다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/175eb965c81798d444ad31a7e4103c2b/dd507/image-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 36.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA30lEQVQY022P226EMAxE8//fuNsXLgUnThyIY5PAUgGtuqgdHVmjGflhzOCj84GImDkxp/RzU5pTukw6q/lM3jGI+Hw+MXLOWSSLiHybrCIHKkeVs6rWcpOhKTWfthsdeLI+AhJ4Ah9tOLw9zARIgw2DxRjj7dlP/Ojdo7MwK0z/Y2ftQu5dJAq6/Mow87IsbdtGom2rtZZaTuoNkczM4wjDCBTjWo8FRkTXdWuD9qRNkJ70w+Uodd/312t/VykVABDRe38lJjGLLo1LLR40bu58Kn9US8kiYJ1z6BCvzV+5yY/wopDIEgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/175eb965c81798d444ad31a7e4103c2b/8ac56/image-4.webp 240w,\n/static/175eb965c81798d444ad31a7e4103c2b/d3be9/image-4.webp 480w,\n/static/175eb965c81798d444ad31a7e4103c2b/e46b2/image-4.webp 960w,\n/static/175eb965c81798d444ad31a7e4103c2b/f992d/image-4.webp 1440w,\n/static/175eb965c81798d444ad31a7e4103c2b/2be02/image-4.webp 1528w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/175eb965c81798d444ad31a7e4103c2b/8ff5a/image-4.png 240w,\n/static/175eb965c81798d444ad31a7e4103c2b/e85cb/image-4.png 480w,\n/static/175eb965c81798d444ad31a7e4103c2b/d9199/image-4.png 960w,\n/static/175eb965c81798d444ad31a7e4103c2b/07a9c/image-4.png 1440w,\n/static/175eb965c81798d444ad31a7e4103c2b/dd507/image-4.png 1528w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/175eb965c81798d444ad31a7e4103c2b/d9199/image-4.png\"\n            alt=\"image 4\"\n            title=\"image 4\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/33b3ac0355759a66c8b433ce2ddd4626/3c492/image-5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABeklEQVQoz5VRXW/bMAz0//91K7qXrY3jz8SNJUqiJFK0rahw0nYPKQqMOBAHCMcjT9XFoEOvAZTWFhGMcR41mFlpbYxDVAAaDHr/iOq5mRSYtutf60YDdMNorO364eVQt10P1tbHpu16h/iIapomDUCJU2IMIcSI3ocYI9EH/yTfOT///vX01LTdyQQWWZf/qGoYx34Yx9O5G6fp7aKUVhpE5GfZuq4552pddzPmxExExMxMLEl+qGVZ0PumaSswdtb6Nmz7ek7pAZ9CkSUlAWPquqlCjMZapTUYE2/W3+Ken9+zDHTbMYRQJRHn8HCoX/7+EaZy3a7buiP/6yVvktg6p5Qm4pzz/exKljWJhBBHJy3QUcVWUwf0Ooce+KhjrWIHNHsupcQYT6ezQyylbDlXOe+nIvozLp3hwabBpiBblExLjpKjbLRkWfNdPI4nRF9KuV6vVQgR0YOxo/bt7Hrl2tkRUUp78Cnt33CjTLRvPr1djHXMiYjfAbdxrBJEdCIjAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/33b3ac0355759a66c8b433ce2ddd4626/8ac56/image-5.webp 240w,\n/static/33b3ac0355759a66c8b433ce2ddd4626/d3be9/image-5.webp 480w,\n/static/33b3ac0355759a66c8b433ce2ddd4626/e46b2/image-5.webp 960w,\n/static/33b3ac0355759a66c8b433ce2ddd4626/063bf/image-5.webp 1300w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/33b3ac0355759a66c8b433ce2ddd4626/8ff5a/image-5.png 240w,\n/static/33b3ac0355759a66c8b433ce2ddd4626/e85cb/image-5.png 480w,\n/static/33b3ac0355759a66c8b433ce2ddd4626/d9199/image-5.png 960w,\n/static/33b3ac0355759a66c8b433ce2ddd4626/3c492/image-5.png 1300w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/33b3ac0355759a66c8b433ce2ddd4626/d9199/image-5.png\"\n            alt=\"image 5\"\n            title=\"image 5\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1e6d273e63c16f348a91bba2ced9860a/dd507/image-6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.41666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABHElEQVQoz42QjY6DIBCEef+XPLUKgvy4wC4gVi/FpLk2l959mRAmG7LDsJ7P3ci7fuiG4avrh9s4S+lW8CH4EMB78P66/xR4vwKwifNxmqRS48S5EFyI4TYaB0gUEa/zTUi4AhjrGADknGut+74fF+e5N2qtz9EbOWVEZA5AW5MopZTOV47jMNYi4vkbtVZmwa4R7vej1lq2rWyNWrdmI2Iu5bIv2raU8yP2rB1fjLV2VkpprY1ZAS5dhT3tU1dnzBjb970Q4lFEovwPEFEpDT4wtSxcKCG1dhqJaov0mVIKpURETEoZYlTGi8VCAEoJCduC8kGllJQSE/OcM/mAXDphZmEkBCilzT/yeMyFsM7FiESE2D7eIv1JjPgNaMt23xEqQBAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/1e6d273e63c16f348a91bba2ced9860a/8ac56/image-6.webp 240w,\n/static/1e6d273e63c16f348a91bba2ced9860a/d3be9/image-6.webp 480w,\n/static/1e6d273e63c16f348a91bba2ced9860a/e46b2/image-6.webp 960w,\n/static/1e6d273e63c16f348a91bba2ced9860a/f992d/image-6.webp 1440w,\n/static/1e6d273e63c16f348a91bba2ced9860a/2be02/image-6.webp 1528w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/1e6d273e63c16f348a91bba2ced9860a/8ff5a/image-6.png 240w,\n/static/1e6d273e63c16f348a91bba2ced9860a/e85cb/image-6.png 480w,\n/static/1e6d273e63c16f348a91bba2ced9860a/d9199/image-6.png 960w,\n/static/1e6d273e63c16f348a91bba2ced9860a/07a9c/image-6.png 1440w,\n/static/1e6d273e63c16f348a91bba2ced9860a/dd507/image-6.png 1528w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/1e6d273e63c16f348a91bba2ced9860a/d9199/image-6.png\"\n            alt=\"image 6\"\n            title=\"image 6\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>이 부분은 [정책]의 [연결된 엔터티]에서도 확인할 수 있다.</p>\n<br />\n<br />\n<h2 id=\"2-api-gateway-추가\" style=\"position:relative;\"><a href=\"#2-api-gateway-%EC%B6%94%EA%B0%80\" aria-label=\"2 api gateway 추가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. API Gateway 추가</h2>\n<p>람다를 만들었으면, 이 함수를 들고 나갈 수 있게 통로를 열어줘야한다.</p>\n<blockquote>\n<p>API Gateway란 규모에 상관없이 API 생성, 유지 관리, 모니터링과 보호를 할 수 있게 해주는 서비스이다.</p>\n</blockquote>\n<h3 id=\"2-1-api-생성\" style=\"position:relative;\"><a href=\"#2-1-api-%EC%83%9D%EC%84%B1\" aria-label=\"2 1 api 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-1. API 생성</h3>\n<p>기본적인 API를 생성한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c6435728b393096ba80ab34391481a1e/dd507/image-7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAk0lEQVQI142LMQ4CMQwE83teRssTaK5AdzklTuzYjjdCCChoWY1G02zajkKNWORPOnNjYTrbfk+lFJ/T3efH7r82s4gA4jsAay0RGb78cavXS6qV3AwRIqKqEaFqqu+b+2QWEQHg7q31SgSAmX1GrGci0e1kGmZm+5FzPsfQUioRYa3eO4sEoGZHzkM1gFJrJYqIF/K05LOnSew4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/c6435728b393096ba80ab34391481a1e/8ac56/image-7.webp 240w,\n/static/c6435728b393096ba80ab34391481a1e/d3be9/image-7.webp 480w,\n/static/c6435728b393096ba80ab34391481a1e/e46b2/image-7.webp 960w,\n/static/c6435728b393096ba80ab34391481a1e/f992d/image-7.webp 1440w,\n/static/c6435728b393096ba80ab34391481a1e/2be02/image-7.webp 1528w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/c6435728b393096ba80ab34391481a1e/8ff5a/image-7.png 240w,\n/static/c6435728b393096ba80ab34391481a1e/e85cb/image-7.png 480w,\n/static/c6435728b393096ba80ab34391481a1e/d9199/image-7.png 960w,\n/static/c6435728b393096ba80ab34391481a1e/07a9c/image-7.png 1440w,\n/static/c6435728b393096ba80ab34391481a1e/dd507/image-7.png 1528w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/c6435728b393096ba80ab34391481a1e/d9199/image-7.png\"\n            alt=\"image 7\"\n            title=\"image 7\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h3 id=\"2-2-메서드-생성-및-배포\" style=\"position:relative;\"><a href=\"#2-2-%EB%A9%94%EC%84%9C%EB%93%9C-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EB%B0%B0%ED%8F%AC\" aria-label=\"2 2 메서드 생성 및 배포 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-2. 메서드 생성 및 배포</h3>\n<p>해당 API의 /db 리소스 안에 GET, POST 메서드를 추가한다.\n이후 [통합 응답] - [프록시 통합]과 같은 필요한 값을 세팅해주고, API 배포를 눌러준다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/854eb2523b89b420cc359f8a3ba06067/dd507/image-8.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.166666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA50lEQVQY02WQXWrEMAyEc396oJ6gd+hrWxLIJnYs27Gs34UkTQv7MQ+agRFCw9f3T9y2XArkfAngb35RiHEOED7f14+34fSISEQJYFmXeZ5jjMzcXyAiyHl+LCltkOJQSqVOdlBKXdcAAGlLrTV3NzN3B8hMZIdVVRFRM2YZFtjHkAtZQtk7ubuo7q3lUvwXZmbV254bRWQglkqo5mreEMdp6h1JjMQu1FiksdodqOZSaq2DiN77eu/jODERq5HcbWPRVFFVz6a7hxBijP/Kx7X9+FNpWBpi76f2ho817K1dCfaGfUd8AsyglarGmbh4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/854eb2523b89b420cc359f8a3ba06067/8ac56/image-8.webp 240w,\n/static/854eb2523b89b420cc359f8a3ba06067/d3be9/image-8.webp 480w,\n/static/854eb2523b89b420cc359f8a3ba06067/e46b2/image-8.webp 960w,\n/static/854eb2523b89b420cc359f8a3ba06067/f992d/image-8.webp 1440w,\n/static/854eb2523b89b420cc359f8a3ba06067/2be02/image-8.webp 1528w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/854eb2523b89b420cc359f8a3ba06067/8ff5a/image-8.png 240w,\n/static/854eb2523b89b420cc359f8a3ba06067/e85cb/image-8.png 480w,\n/static/854eb2523b89b420cc359f8a3ba06067/d9199/image-8.png 960w,\n/static/854eb2523b89b420cc359f8a3ba06067/07a9c/image-8.png 1440w,\n/static/854eb2523b89b420cc359f8a3ba06067/dd507/image-8.png 1528w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/854eb2523b89b420cc359f8a3ba06067/d9199/image-8.png\"\n            alt=\"image 8\"\n            title=\"image 8\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h3 id=\"2-3-api-endpoint-확인\" style=\"position:relative;\"><a href=\"#2-3-api-endpoint-%ED%99%95%EC%9D%B8\" aria-label=\"2 3 api endpoint 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-3. API Endpoint 확인</h3>\n<p>[구성] - [트리거] 에서 배포한 API Endpoint를 확인할 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d8f15f7a48551d4a14d2d007872afe1d/fbfd6/image-9.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 26.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAr0lEQVQY012LMXLDMAwE9f/fpXSXFMpEkQmCAEgcQDnxKE003tnirtilMheiQvR9v++FqFZuTVRfbCLXfV7RZSs8M/sYzLxte/fIzIhXRa2PAcCB4U5URXXZS81MNVMz5tb7OGMETgKI+Ktn5sx/IsLdlybigIjmA+vNb2/rx+f6vttXte4YCPMUzDbmfPz8XpjHsVCtgKtZHz3joMI7VfVAhEd6hHpwRzUgcl5AxBNJYx8kTz7KbwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/d8f15f7a48551d4a14d2d007872afe1d/8ac56/image-9.webp 240w,\n/static/d8f15f7a48551d4a14d2d007872afe1d/d3be9/image-9.webp 480w,\n/static/d8f15f7a48551d4a14d2d007872afe1d/e46b2/image-9.webp 960w,\n/static/d8f15f7a48551d4a14d2d007872afe1d/00474/image-9.webp 1357w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/d8f15f7a48551d4a14d2d007872afe1d/8ff5a/image-9.png 240w,\n/static/d8f15f7a48551d4a14d2d007872afe1d/e85cb/image-9.png 480w,\n/static/d8f15f7a48551d4a14d2d007872afe1d/d9199/image-9.png 960w,\n/static/d8f15f7a48551d4a14d2d007872afe1d/fbfd6/image-9.png 1357w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/d8f15f7a48551d4a14d2d007872afe1d/d9199/image-9.png\"\n            alt=\"image 9\"\n            title=\"image 9\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<br />\n<br />\n<h3 id=\"3-웹-어플리케이션에-적용\" style=\"position:relative;\"><a href=\"#3-%EC%9B%B9-%EC%96%B4%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98%EC%97%90-%EC%A0%81%EC%9A%A9\" aria-label=\"3 웹 어플리케이션에 적용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 웹 어플리케이션에 적용</h3>\n<p>총 두 가지의 REST API를 만들었다.</p>\n<ul>\n<li>db-state: <code class=\"language-text\">GET</code> DB 인스턴스의 상태를 확인할 수 있다. 시작 중, 실행 중, 일시 정지, 정지 중 등이 있다.</li>\n<li>db-manage: <code class=\"language-text\">POST</code> DB 인스턴스의 상태를 바꿀 수 있다.</li>\n</ul>\n<p><code class=\"language-text\">react-query</code>와 <code class=\"language-text\">fetch</code>를 이용하여 웹 어플리케이션에서 동작할 수 있도록 구성하였다.</p>\n<p>예시 코드는 다음과 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">SettingsPage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"token keyword\">const</span> router <span class=\"token operator\">=</span> <span class=\"token function\">useRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">,</span> isLoading<span class=\"token punctuation\">,</span> refetch<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useDbStateQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>mutate<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useDbStateMutation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleControl</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>data <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>status <span class=\"token operator\">===</span> <span class=\"token string\">'stopping'</span> <span class=\"token operator\">||</span> data<span class=\"token punctuation\">.</span>status <span class=\"token operator\">===</span> <span class=\"token string\">'starting'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'이미 시작/정지 중입니다. 잠시만 기다려주세요.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>status <span class=\"token operator\">===</span> <span class=\"token string\">'available'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>action<span class=\"token operator\">:</span> <span class=\"token string\">'stop'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function-variable function\">onSuccess</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'정지되었습니다.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token function\">refetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function-variable function\">onError</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'에러가 발생했습니다. 고슈에게 문의하세요.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>status <span class=\"token operator\">===</span> <span class=\"token string\">'stopped'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">mutate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>action<span class=\"token operator\">:</span> <span class=\"token string\">'start'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function-variable function\">onSuccess</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'시작되었습니다. 적용까지 최대 3분의 시간이 소요됩니다.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token function\">refetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function-variable function\">onError</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'에러가 발생했습니다. 고슈에게 문의하세요.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ...</span></code></pre></div>\n<p>화면은 대충 요런 모양을 띄고 있다. 상태가 바뀌는데 최대 3분 정도 소요되기 때문에 진행 상태를 모두 적용하였다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4c6072c68d4950e624cb0e53180148c2/dd507/image-10.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA/ElEQVQY05WRSUsDMRiG54eJFw96EURR8F+3znSWZpLMBrZ2Mmk6ZCPLSJqDghX0PX0Lz7cmxhh2Ok0TnSY6jsR7v/wi/00xkszz/L7bDcOw3390fW+Mcc5Za51z3vtgO+tcMH6WS4QQANQYNxg3bdtBiLYAVBUANYQQIYTbtkMII4QppYwxepbWOsBK6QBsQdsFMi9KUNcYNZGEEB0OIyGE0rAU50JrrZSy1p07S0mPR0KmmOCcK62lVEoqKaUQgnMug684F5H5Grsoyk1elGXV98PyTyUPjy+3d/dPz69X1zdpmi3LcvE2l+E8L9ZvaZZtVqs1Yyy+5I/wJ+YJwgrqs6teAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/4c6072c68d4950e624cb0e53180148c2/8ac56/image-10.webp 240w,\n/static/4c6072c68d4950e624cb0e53180148c2/d3be9/image-10.webp 480w,\n/static/4c6072c68d4950e624cb0e53180148c2/e46b2/image-10.webp 960w,\n/static/4c6072c68d4950e624cb0e53180148c2/f992d/image-10.webp 1440w,\n/static/4c6072c68d4950e624cb0e53180148c2/2be02/image-10.webp 1528w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/4c6072c68d4950e624cb0e53180148c2/8ff5a/image-10.png 240w,\n/static/4c6072c68d4950e624cb0e53180148c2/e85cb/image-10.png 480w,\n/static/4c6072c68d4950e624cb0e53180148c2/d9199/image-10.png 960w,\n/static/4c6072c68d4950e624cb0e53180148c2/07a9c/image-10.png 1440w,\n/static/4c6072c68d4950e624cb0e53180148c2/dd507/image-10.png 1528w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/4c6072c68d4950e624cb0e53180148c2/d9199/image-10.png\"\n            alt=\"image 10\"\n            title=\"image 10\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>이것으로 기본적인 세팅은 모두 끝났다.</p>\n<br />\n<br />\n<h2 id=\"4-event-scheduler-활용\" style=\"position:relative;\"><a href=\"#4-event-scheduler-%ED%99%9C%EC%9A%A9\" aria-label=\"4 event scheduler 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. Event Scheduler 활용</h2>\n<p>기본적인 작업을 끝냈지만, 여전히 남아있는 문제는 다음과 같다.</p>\n<ul>\n<li>내가 만약에 DB 끄는 걸 까먹으면? → 과금 ing</li>\n<li>일시중지 하더라도 일주일이 지나면? → 과금 ing</li>\n</ul>\n<p>이를 방지하기 위해서 <strong>매 시간마다 주기적으로 API를 호출</strong>하여 끌 수 있도록 구성하였다.</p>\n<p>Amazon EventBridge 의 Scheduler 이 이러한 수행한다.</p>\n<blockquote>\n<p><a href=\"https://docs.aws.amazon.com/ko_kr/scheduler/latest/UserGuide/what-is-scheduler.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Amazon EventBridge Scheduler</a>는 하나의 중앙 관리형 서비스에서 작업을 생성, 실행, 관리할 수 있는 서버리스 스케줄러이다. 확장성이 뛰어난 EventBridge Scheduler를 사용하면 모든 AWS 서비스를 대상으로 호출할 수 있는 수백만 개의 작업을 예약할 수 있다.</p>\n</blockquote>\n<p>[일정 생성]을 클릭하여 원하는 주기와 페이로드를 구성하면, 다음과 같은 화면을 볼 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8799bbdc4741236f093432ff98a51a9b/3d405/image-11.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 15.416666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAf0lEQVQI10WMQQ7CMAwE+/8TL+IBPIJbq7TUOHFi7zonVCHBnFYjzS6nyBgj/8zfCoBfNaf1C5Dg5dvj1p/3pdYqIgRmJsDwKwEyAt0sSTKHu1k362O4RzAzarH3sQDcpBZ1vX65S4sIaWf3KDrOBmQex0u1glzXrZRdVR3JnB9HhqrU7Xx22wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/8799bbdc4741236f093432ff98a51a9b/8ac56/image-11.webp 240w,\n/static/8799bbdc4741236f093432ff98a51a9b/d3be9/image-11.webp 480w,\n/static/8799bbdc4741236f093432ff98a51a9b/e46b2/image-11.webp 960w,\n/static/8799bbdc4741236f093432ff98a51a9b/4d989/image-11.webp 1348w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/8799bbdc4741236f093432ff98a51a9b/8ff5a/image-11.png 240w,\n/static/8799bbdc4741236f093432ff98a51a9b/e85cb/image-11.png 480w,\n/static/8799bbdc4741236f093432ff98a51a9b/d9199/image-11.png 960w,\n/static/8799bbdc4741236f093432ff98a51a9b/3d405/image-11.png 1348w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/8799bbdc4741236f093432ff98a51a9b/d9199/image-11.png\"\n            alt=\"image 11\"\n            title=\"image 11\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<br />\n<br />\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p>언젠가 람다를 사용해보고 싶었는데, 이렇게 돈 들여가며 배울 줄 몰랐다..\n뭐든 처음 배울 때 막막하다 생각. 재밌는 경험이었다~</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b9837c76d9e2f5cd10952cda8e166e54/dd507/image-12.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+klEQVQY03XP207DMAyA4b7/QwISYx1tkyY+5mzUTjAk2HeTG/9WPH3M88d1vt4+kbXkf9TWABGQWASZNR2ImVWn+XbbNrc6J5p6b3+VUjfnAFFEnPOAmL5NLGJPjDHMbFnWl9e3GCMR5ZzLqbWWcp7uQ8+YGbJqSkhIzCEEFsml1FpFdUJtZqM/pu/PI14XB4BEhEQhRBE1M2EOMU5bLFE6cGttlDZqOfb0fuS9nbGPxMInANCUzCwdf6HJbbsP5Jbde3AeFhf3CN5BCHFb91KrxHimQsQ+RNVf8fvlgohKLEjCDCrAJKQARESl1J+bWh+c2/0WM6u1fgHzCs+0VL5vmAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/b9837c76d9e2f5cd10952cda8e166e54/8ac56/image-12.webp 240w,\n/static/b9837c76d9e2f5cd10952cda8e166e54/d3be9/image-12.webp 480w,\n/static/b9837c76d9e2f5cd10952cda8e166e54/e46b2/image-12.webp 960w,\n/static/b9837c76d9e2f5cd10952cda8e166e54/f992d/image-12.webp 1440w,\n/static/b9837c76d9e2f5cd10952cda8e166e54/2be02/image-12.webp 1528w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/b9837c76d9e2f5cd10952cda8e166e54/8ff5a/image-12.png 240w,\n/static/b9837c76d9e2f5cd10952cda8e166e54/e85cb/image-12.png 480w,\n/static/b9837c76d9e2f5cd10952cda8e166e54/d9199/image-12.png 960w,\n/static/b9837c76d9e2f5cd10952cda8e166e54/07a9c/image-12.png 1440w,\n/static/b9837c76d9e2f5cd10952cda8e166e54/dd507/image-12.png 1528w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/b9837c76d9e2f5cd10952cda8e166e54/d9199/image-12.png\"\n            alt=\"image 12\"\n            title=\"image 12\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>5월 - 12월 비교했을 때 비용이 <code class=\"language-text\">약 89.1%</code> 감소했다!</p>","fields":{"slug":"/posts/2024-01-30//posts/aws-lambda","tagSlugs":["/tag/aws/","/tag/lambda/","/tag/rds/","/tag/tip/","/tag/effective/"]},"frontmatter":{"date":"2024-01-30","description":"Lambda를 이용하여 db 동작 시간 관리하는 방법","tags":["AWS","Lambda","RDS","Tip","Effective"],"title":"내 지갑은 AWS Lambda가 지킨다","socialImage":{"publicURL":"/static/b9837c76d9e2f5cd10952cda8e166e54/image-12.png"}}}},"pageContext":{"slug":"/posts/2024-01-30//posts/aws-lambda"}},"staticQueryHashes":["251939775","2764776372","401334301"]}